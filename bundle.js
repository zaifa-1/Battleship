(()=>{"use strict";var t={426:(t,e,n)=>{n.d(e,{Z:()=>o});var r=n(81),a=n.n(r),i=n(645),s=n.n(i)()(a());s.push([t.id,"*{\n    margin: 0;\n    box-sizing: border-box;\n}\n\nbody{\n    background-color: rgb(6, 0, 46);\n}\n\n\nh1{\n    text-align: center;\n    margin-top: 1em;\n    color: #fffefe;\n}\n\n.container{\n    display: block;\n}\n\n.game-board{\n    --_dimensions: 330px;\n\n    display: grid;\n    grid-template-columns: repeat(10, 1fr);\n\n    width: var(--_dimensions);\n    height: var(--_dimensions);\n\n    gap: 1px;\n\n    margin: 20px auto;\n}\n\n/* .game-board.player{\n    opacity: 0.5;\n} */\n\n.cell{\n    border: 1px solid rgb(136, 0, 255);\n    border-radius: 5px;\n}\n\n.computer .cell{\n    cursor: crosshair;\n}\n.computer .cell.invalid{\n    cursor: not-allowed;\n    pointer-events: none;\n}\n\n.computer .cell:hover{\n    background-color: rgb(255, 0, 204);\n    opacity: 0.5;\n}\n\n.computer .cell.invalid:hover{\n    cursor: not-allowed;\n    background-color: inherit;\n}\n\n\n.blue{\n    background-color: rgb(5, 151, 255);\n}\n.red{\n    background-color: red;\n}\n.green{\n    background-color: rgb(144, 240, 0);\n}",""]);const o=s},645:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",r=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),r&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),r&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,r,a,i){"string"==typeof t&&(t=[[null,t,void 0]]);var s={};if(r)for(var o=0;o<this.length;o++){var l=this[o][0];null!=l&&(s[l]=!0)}for(var c=0;c<t.length;c++){var d=[].concat(t[c]);r&&s[d[0]]||(void 0!==i&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=i),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),a&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=a):d[4]="".concat(a)),e.push(d))}},e}},81:t=>{t.exports=function(t){return t[1]}},379:t=>{var e=[];function n(t){for(var n=-1,r=0;r<e.length;r++)if(e[r].identifier===t){n=r;break}return n}function r(t,r){for(var i={},s=[],o=0;o<t.length;o++){var l=t[o],c=r.base?l[0]+r.base:l[0],d=i[c]||0,h="".concat(c," ").concat(d);i[c]=d+1;var p=n(h),u={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==p)e[p].references++,e[p].updater(u);else{var m=a(u,r);r.byIndex=o,e.splice(o,0,{identifier:h,updater:m,references:1})}s.push(h)}return s}function a(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,a){var i=r(t=t||[],a=a||{});return function(t){t=t||[];for(var s=0;s<i.length;s++){var o=n(i[s]);e[o].references--}for(var l=r(t,a),c=0;c<i.length;c++){var d=n(i[c]);0===e[d].references&&(e[d].updater(),e.splice(d,1))}i=l}}},569:t=>{var e={};t.exports=function(t,n){var r=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},216:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},795:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var a=void 0!==n.layer;a&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,a&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleTagTransform(r,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}},e={};function n(r){var a=e[r];if(void 0!==a)return a.exports;var i=e[r]={id:r,exports:{}};return t[r](i,i.exports,n),i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nc=void 0,(()=>{var t=n(379),e=n.n(t),r=n(795),a=n.n(r),i=n(569),s=n.n(i),o=n(565),l=n.n(o),c=n(216),d=n.n(c),h=n(589),p=n.n(h),u=n(426),m={};m.styleTagTransform=p(),m.setAttributes=l(),m.insert=s().bind(null,"head"),m.domAPI=a(),m.insertStyleElement=d(),e()(u.Z,m),u.Z&&u.Z.locals&&u.Z.locals;class f{constructor(t,e="horizontal",n=0,r=!1){this.length=t,this.alignment=e,this.hitCount=n,this.sunk=r,this.coordinates=[]}hit(){this.hitCount+=1}isSunk(){return this.hitCount===this.length?this.sunk=!0:this.sunk}}class g{constructor(){this.ships=new Set,this.attacks=new Set,this.fleet={warShip:new f(5),submarine:new f(4),pocketShip:new f(3),destroyer:new f(3),dummy:new f(2)}}placementIsValid(t,e){return t<10&&t>=0&&e<10&&e>=0&&!this.ships.has([t,e].toString())}placeShip(t,e,n){if(this.placementIsValid(t,e+(n.length-1))){for(let r=0;r<n.length;r++){let a=[t,e+r],i=[t+1,e+r],s=[t-1,e+r];this.ships.add(a.toString()),this.placementIsValid(s[0],s[1])&&this.ships.add(s.toString()),this.placementIsValid(i[0],i[1])&&this.ships.add(i.toString()),this.placementIsValid(t,e-1)&&this.ships.add([t,e-1].toString()),this.placementIsValid(t,e+(n.length-1))||this.ships.add([t,e+n.length].toString()),this.placementIsValid(t-1,e+n.length)&&this.ships.add([t-1,e+n.length].toString()),this.placementIsValid(t+1,e+n.length)&&this.ships.add([t+1,e+n.length].toString()),this.placementIsValid(t+1,e-1)&&this.ships.add([t+1,e-1].toString()),this.placementIsValid(t-1,e-1)&&this.ships.add([t-1,e-1].toString()),n.coordinates.push(a)}return n.coordinates}}placeShipVertical(t,e,n){if(this.placementIsValid(t+(n.length-1),e)){for(let r=0;r<n.length;r++){let a=[t+r,e],i=[t+r,e+1],s=[t-r,e+1];this.ships.add(a.toString()),this.placementIsValid(s[0],s[1])&&this.ships.add(s.toString()),this.placementIsValid(i[0],i[1])&&this.ships.add(i.toString()),this.placementIsValid(t,e-1)&&this.ships.add([t-1,e].toString()),this.placementIsValid(t,e+(n.length-1))||this.ships.add([t+n.length,e].toString()),this.placementIsValid(t-1,e+1)&&this.ships.add([t-1,e+1].toString()),this.placementIsValid(t+n.length,e+1)&&this.ships.add([t+n.length,e+1].toString()),this.placementIsValid(t+n.length,e-1)&&this.ships.add([t+n.length,e-1].toString()),this.placementIsValid(t-1,e-1)&&this.ships.add([t-1,e-1].toString()),n.coordinates.push(a)}return n.coordinates}}checkCoordinates(t,e,n){for(let r in t.coordinates)if(t.coordinates[r][0]===e&&t.coordinates[r][1]===n)return!0;return!1}checkDamage(t,e,n){for(let r in t)if(this.checkCoordinates(t[r],e,n))return t[r];return null}checkLoss(){for(let t in this.fleet)if(!0!==this.fleet[t].sunk)return!1;return!0}receiveAttack(t,e){let n=this.checkDamage(this.fleet,t,e);return null!==n?(this.attacks.add([t,e].toString()),n.hit(),n.isSunk(),this.checkLoss()&&console.log("game over"),!0):(this.attacks.add([t,e].toString()),!1)}placeRandomShips(){let t=Object.keys(this.fleet).length;for(let e=0;e<t;e++){let t=Math.floor(10*Math.random()),n=Math.floor(10*Math.random()),r=[t,n];if(this.ships.has(r.toString()))e--;else{let r=Object.keys(this.fleet)[e];this.placementIsValid(t,n+(this.fleet[r].length-1))?this.placeShip(t,n,this.fleet[r]):e--}}}}class y{constructor(){}playMove(t){let e=[Math.floor(9*Math.random()),Math.floor(9*Math.random())];if(!t.attacks.has(e.toString()))return e;this.playMove(t)}}let v=document.querySelectorAll(".player > .cell"),S=document.querySelectorAll(".computer > .cell");v.forEach(((t,e)=>{let n=Math.floor(e/10),r=e%10;t.setAttribute("data-cell",`${n}-${r}`)})),S.forEach(((t,e)=>{let n=Math.floor(e/10),r=e%10;t.setAttribute("data-cell",`${n}-${r}`)}));let b=new class{constructor(t=new g,e=new g){this.pBoard=document.querySelector("#player"),this.cBoard=document.querySelector("#computer"),this.currentPlayer="player",this.gameStatus="prepare",this.playerGameBoard=t,this.computerGameBoard=e,this.computerGameBoard.placeRandomShips(),this.comp=new y}getCoords(t){let e=t.target.dataset.cell;return[Number(e.slice(0,1)),Number(e.slice(e.length-1))]}initializeBoards(){this.cBoard.addEventListener("click",(t=>{let e=this.getCoords(t);"player"!==this.currentPlayer&&this.computerGameBoard.attacks.has([e[0],e[1]].toString())||(this.displayReceivedAttack(e[0],e[1],this.computerGameBoard,"#computer"),this.switchPlayer())}));for(let t=0;t<10;t++)for(let e=0;e<10;e++){let n=document.createElement("div");n.classList.add("cell"),n.setAttribute("data-cell",`${t}-${e}`);let r=document.createElement("div");r.classList.add("cell"),r.setAttribute("data-cell",`${t}-${e}`),this.pBoard.appendChild(n),this.cBoard.appendChild(r)}}playGame(){this.initializeBoards(),this.currentPlayer="player"}switchPlayer(){"player"===this.currentPlayer?(this.currentPlayer="computer",this.displayComputerAttack(),this.switchPlayer()):this.currentPlayer="player"}placeShipsOnBoard(){this.playerGameBoard.placeRandomShips();let t=this.playerGameBoard.fleet;for(let e in t){let n=t[e].coordinates;for(let t=0;t<n.length;t++)document.querySelector(`.player > [data-cell="${n[t][0]}-${n[t][1]}"]`).classList.add("blue")}}highlightHoveredCells(t){this.pBoard.addEventListener("mouseover",(e=>{let n=this.getCoords(e);console.log(n),this.removeHighlight();for(let e=0;e<t&&n[1]+e<=9;e++){let t=document.querySelector(`.player > [data-cell="${n[0]}-${n[1]+e}"]`);console.log(t.dataset.cell),t.classList.add("blue")}}))}removeHighlight(){document.querySelectorAll(".player > .cell").forEach((t=>{t.classList.remove("blue")}))}displayReceivedAttack(t,e,n,r){let a=n.receiveAttack(t,e);console.log(a);let i=document.querySelector(`${r} > [data-cell="${t}-${e}"]`);a?i.classList.add("red"):i.classList.add("green")}displayComputerAttack(){let t=this.comp.playMove(this.playerGameBoard);this.displayReceivedAttack(t[0],t[1],this.playerGameBoard,"#player")}};b.playGame(),b.placeShipsOnBoard()})()})();